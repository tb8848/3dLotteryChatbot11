
<!DOCTYPE html>
<html  class="notie" lang="zh">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="copyright" content="Copyright 版权所有" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="renderer" content="webkit" />
    <base target="_self" />
    <title>【福彩3D】</title>
    <link rel="stylesheet" href="../css/style-Permutation5.css" media="all">
    <link rel="stylesheet" href="../css/A-P5.css" media="all">

    <link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
    <link rel="stylesheet" href="../css/3603d/reset.css" />
    <link rel="stylesheet" href="../css/3603d/i6fzam.css" />
    <link rel="stylesheet" href="../css/3603d/mod.caiz.css" />
    <link rel="stylesheet" href="../css/3603d/mod.mv.css" />
    <link rel="stylesheet" href="../css/3603d/tools_infor.css" />
    <style>

        #doc3{
            width:800px !important;
        }

        .article-main-bd img{
            width:100%;
        }

        .mod-select-bolls{
            margin:0 30px
        }

        .mod-select-bolls .boll-item-col3 .t{
            width:260px
        }

        .t-1 td{
            border:1px solid #e2e2e2;
        }
    </style>
</head>
<body style="overflow: auto">

<table style="width: 100%">
    <tr>
        <td  style="text-align: left;width: 800px" valign="top">
            <div id="stopBuy" style="margin:10px;width: 800px;height: 300px;line-height:300px;text-align: center;display: none">
                <div>
                    <div class="mod-cz-bd">
                        <div class="grid-1 clearfix">
                            <div class="article" style="width: 800px">
                                <div class="plays_box">
                                    <h2 style="font-size: 30px;font-weight: bolder;" id="openStatusDesc">已停盘</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div id="doc3" style="margin:10px">
                <div id="bd">
                    <div class="mod-cz-bd">
                        <div class="nav-cz-sub" style="padding:5px 0 6px 11px">
                            <ul class="clearfix" id="plays">
                                <li class="active" desc="2D|2D" maxplay=""  combo="" id="lm-7"><a href="#">2D</a></li>
                            </ul>
                        </div>
                        <div class="grid-1 clearfix">
                            <div class="article" style="width: 800px">
                                <div class="plays_box">
                                    <div class="mod-select-filter zx_plays" id="lm-7-ls">
                                        <label style="position: relative;display: inline-block">
                                            <input checked="checked" type="radio" autocomplete="off" name="1d" desc="1d" value="1" onclick="changeLsType(this,1)"><span>2D</span></label>
                                        <label style="position: relative;display: inline-block">
                                            <input  type="radio" autocomplete="off" name="1d" desc="c1" value="2" onclick="changeLsType(this,2)"><span>猜2D</span></label>
                                    </div>

                                    <div id="lm-plays-7" class="plays">
                                        <div id="lm-plays-7-1" class="zx-type" desc="1d">
                                            <div class="mod-select-info">
                                                <p  class="plays-memo"><i class="ico ico-info-s"></i>
                                                    <b>玩法提示：</b><span>投注号码与开奖号码中对应两个位置的号码相同，即<em class='red'>中奖</em></span></p>

                                            </div>
                                            <div class="mod-select-bolls">
                                                <div class="hd">
                                                    <h3 class="clearfix">
                                                        <span class="t1"><em>选号区</em>每位至少选择1个号码</span><span class="t2"><em>操作区</em>快捷选号</span>
                                                    </h3>
                                                </div>
                                                <div class="bd">
                                                    <div class="tools-boll-list" unselectable="on" onselectstart="return false;">
                                                        <div class="boll-item boll-item-col3 sd_zx">
                                                            <div class="k">
                                                                <span class="k1">百位<span class="caret"></span></span>
                                                                <span class="k2"><!--遗漏--></span>
                                                            </div>
                                                            <div class="v">
                                                                <div class="boll-list">
                                                                    <ul class="clearfix">
                                                                        <li><em class="btn-boll" onclick="selectBall(this,0,'bai')" num="0" >0</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,1,'bai')" num="1" >1</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,2,'bai')" num="2" >2</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,3,'bai')" num="3" >3</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,4,'bai')" num="4" >4</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,5,'bai')" num="5" >5</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,6,'bai')" num="6" >6</em><span class="red" ></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,7,'bai')" num="7" >7</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,8,'bai')" num="8" >8</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,9,'bai')" num="9" >9</em><span></span></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <div class="t">
                                                                <div class="tool-list">
                                                                    <ul class="clearfix dxjo">
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,10,'bai')" num="10" >全</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,12,'bai')" num="12" >大</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,11,'bai')" num="11" >小</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,55,'bai')" num="55" >奇</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,44,'bai')" num="44" >偶</a></li>
                                                                        <li><a href="#" class="lnk" onclick="clearBall(this,'bai')">清除</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="boll-item boll-item-col3 sd_zx">
                                                            <div class="k">
                                                                <span class="k1">十位<span class="caret"></span></span>
                                                            </div>
                                                            <div class="v">
                                                                <div class="boll-list">
                                                                    <ul class="clearfix">
                                                                        <li><em class="btn-boll" onclick="selectBall(this,0,'shi')" num="0" >0</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,1,'shi')" num="1" >1</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,2,'shi')" num="2" >2</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,3,'shi')" num="3" >3</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,4,'shi')" num="4" >4</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,5,'shi')" num="5" >5</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,6,'shi')" num="6" >6</em><span class="red" ></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,7,'shi')" num="7" >7</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,8,'shi')" num="8" >8</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,9,'shi')" num="9" >9</em><span></span></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <div class="t">
                                                                <div class="tool-list">
                                                                    <ul class="clearfix dxjo">
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,10,'shi')" num="10" >全</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,12,'shi')" num="12" >大</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,11,'shi')" num="11" >小</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,55,'shi')" num="55" >奇</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,44,'shi')" num="44" >偶</a></li>
                                                                        <li><a href="#" class="lnk" onclick="clearBall(this,'shi')">清除</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="boll-item boll-item-col3 sd_zx">
                                                            <div class="k">
                                                                <span class="k1">个位<span class="caret"></span></span>
                                                            </div>
                                                            <div class="v">
                                                                <div class="boll-list">
                                                                    <ul class="clearfix">
                                                                        <li><em class="btn-boll" onclick="selectBall(this,0,'ge')" num="0" >0</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,1,'ge')" num="1" >1</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,2,'ge')" num="2" >2</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,3,'ge')" num="3" >3</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,4,'ge')" num="4" >4</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,5,'ge')" num="5" >5</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,6,'ge')" num="6" >6</em><span class="red" ></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,7,'ge')" num="7" >7</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,8,'ge')" num="8" >8</em><span></span></li>
                                                                        <li><em class="btn-boll" onclick="selectBall(this,9,'ge')" num="9" >9</em><span></span></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <div class="t">
                                                                <div class="tool-list">
                                                                    <ul class="clearfix dxjo">
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,10,'ge')" num="10" >全</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,12,'ge')" num="12" >大</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,11,'ge')" num="11" >小</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,55,'ge')" num="55" >奇</a></li>
                                                                        <li><a href="#" class="btn btn-middle" onclick="selectBall(this,44,'ge')" num="44" >偶</a></li>
                                                                        <li><a href="#" class="lnk" onclick="clearBall(this,'ge')">清除</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="ft">
                                                    <p class="sel_info">您选了 <b>0</b> 注</p>
                                                </div>

                                            </div>
                                        </div>
                                        <div id="lm-plays-7-2" class="zx-type" desc="c1" style="display:none">
                                            <div class="mod-select-info">
                                                <p class="plays-memo" >
                                                    <i class="ico ico-info-s"></i>
                                                    <b>玩法提示：</b>
                                                </p>
                                                <p class="plays-memo">
                                                    <span>1. 该玩法设置了2种中奖赔率，分别为：<em class="red">P1,P2</em>。在下注成功后，可在下注明细中查看中奖赔率。 </span>
                                                </p>
                                                <p class="plays-memo">
                                                    <span>2. 若当期开奖号码中包含投注的两个号码即中奖,投注为两不同号按赔率 <em class="red">P1</em>兑奖；两同号按赔率 <em class="red">P2</em>兑奖；</span>
                                                </p>

                                            </div>
                                            <div class="mod-select-bolls">
                                                <div class="hd">
                                                    <h3 class="clearfix">
                                                        <span class="t1"><em>选号区</em>每位至少选择1个号码</span><span class="t2"><em>操作区</em>快捷选号</span>
                                                    </h3>
                                                </div>
                                                <div class="bd">
                                                    <div class="boll-item boll-item-col3" unselectable="on" onselectstart="return false;">
                                                        <div class="k">
                                                            <span class="k1">号码<span class="caret"></span></span>
                                                            <span class="k2"><!--遗漏--></span>
                                                        </div>
                                                        <div class="v">
                                                            <div class="boll-list">
                                                                <ul class="clearfix">
                                                                    <li><em class="btn-boll" onclick="selectBall(this,0,'bai')" num="0" >0</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,1,'bai')" num="1" >1</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,2,'bai')" num="2" >2</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,3,'bai')" num="3" >3</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,4,'bai')" num="4" >4</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,5,'bai')" num="5" >5</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,6,'bai')" num="6" >6</em><span class="red" ></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,7,'bai')" num="7" >7</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,8,'bai')" num="8" >8</em><span></span></li>
                                                                    <li><em class="btn-boll" onclick="selectBall(this,9,'bai')" num="9" >9</em><span></span></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="t">
                                                            <div class="tool-list">
                                                                <ul class="clearfix dxjo">
                                                                    <li><a href="#" class="btn btn-middle" onclick="selectBall(this,10,'bai')" num="10" >全</a></li>
                                                                    <li><a href="#" class="btn btn-middle" onclick="selectBall(this,12,'bai')" num="12" >大</a></li>
                                                                    <li><a href="#" class="btn btn-middle" onclick="selectBall(this,11,'bai')" num="11" >小</a></li>
                                                                    <li><a href="#" class="btn btn-middle" onclick="selectBall(this,55,'bai')" num="55" >奇</a></li>
                                                                    <li><a href="#" class="btn btn-middle" onclick="selectBall(this,44,'bai')" num="44" >偶</a></li>
                                                                    <li><a href="#" class="lnk" onclick="clearBall(this,'bai')">清除</a></li>
                                                                </ul>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="ft">
                                                    <p class="sel_info">您选了 <b>0</b> 注</p>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <div class="mod-select-result">
                                        <div class="panel panel-t9 none" id="cd_list_try" style="position:absolute; bottom: 143px;right: 58px;width: 130px;cursor: pointer;_overflow: hidden;">
                                            <div class="panel-content">
                                                <div class="bd">
                                                    <p>手气不错，机选一注试试</p>
                                                </div>
                                            </div>
                                            <span class="sd"></span>
                                        </div>
                                        <div class="hd confirm_sel_code_list" style="margin-left: 200px;text-align: left;">
                                            <button type="button" class="btn" id="confirm_sel_code"><span class="btn-large btn-slt-ok"><i class="l"><i class="r">确认选号</i></i></span></button>
                                            <a href="javascript:void(0)" class="lnk lnk-calcel" onclick="clearAllBall()">清空选号</a>
                                        </div>
                                        <div class="bd clearfix">
                                            <div class="result">
                                                <div class="content" >
                                                    <ul class="clearfix codelist" id="codelist">
                                                        <!--                                            <li class="" codes="Z1|234,3,3">-->
                                                        <!--                                                <span class="del" count="3">删除</span>-->
                                                        <!--                                                <span class="modi" count="3">修改</span>-->
                                                        <!--                                                <div class="code">-->
                                                        <!--                                                    <b>直选复式</b><b class="em">234,3,3</b>  [3注]</div>-->
                                                        <!--                                            </li>-->
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="qkmethod">
                                                <ul plays="Z1|直选">
                                                    <li><a class="btn-middle" count="1" href="javascript:void(0)" onclick="robotChoose(1)">机选1注</a></li>
                                                    <li><a class="btn-middle" count="5" href="javascript:void(0)" onclick="robotChoose(5)">机选5注</a></li>
                                                    <li><a class="btn-middle" count="10" href="javascript:void(0)" onclick="robotChoose(10)">机选10注</a></li>
                                                    <li><a class="btn-middle" count="0" href="javascript:void(0)" onclick="clearList()">清空列表</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mod-select-result" id="result">
                                    <div class="ft">
                                        <div class="total">
                                            您选了 <b class="em" id="count">0</b> 注，下注金额 <input class="text" id="buyMoney" type="text" value="" style="width: 80px;height: 30px" autocomplete="off" maxlength="6"> 元，共 <b class="em" id="money">0</b> 元
                                        </div>
                                        <div style="text-align: center">
                                            <button type="button" class="btn" id="confirm_buy"><span class="btn-large btn-slt-ok">确认下注</span></button>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- 中奖说明}} -->
                        </div>
                    </div>
                </div>
            </div>
            <style>
                .home-newser p {
                    display: none
                }

                .home-newser ul {
                    float: none
                }

                .home-newser li {
                    width: 100%
                }
            </style>
            </div>
        </td>
        <td style="text-align: left;padding-top:10px;width: calc(100% - 800px)" valign="top">
            <div class="bd m5" style="margin-bottom: 10px">
                <div class="div_print " id="betlackPrint">
                    <table class="t-1 tc" style="width:100%">
                        <thead>
                        <tr class="title-bar">
                            <td colspan="4" class="print_action" i18n="kuaida.current.stopBuyCodes">目前停押号码</td>
                        </tr>
                        <tr class="bg2">
                            <td width="50%">方案</td>
                            <td width="15%">号码</td>
                            <td width="15%">金额</td>
                            <td width="20%">时间</td>
                            <!--                            <td width="10%"><label>-->
                            <!--                                <span i18n="kuaida.selectAll">全选</span>-->
                            <!--                                <input type="checkbox" id="selectAll_lack" class="checkbox"></label> -->
                            <!--                            </td> -->
                        </tr>
                        </thead>
                        <tbody id="tbody_lack" class="tc">
                        <!--                                    <tr><td colspan="3" class="blank_area"></td></tr>-->
                        <!--                                    <tr> <td colspan="3" class="fb tfoot"> 笔数:0&nbsp;&nbsp;总金额:0 </td></tr>-->
                        </tbody>
                        <tfoot>
                        <tr> <td colspan="4" class="fb tfoot">
                            <span i18n="kuaida.bishu">笔数:</span><span  id="stopBuy-bishu">0</span>&nbsp;&nbsp;
                            <span i18n="kuaida.totalMoney">总金额:</span><span  id="stopBuy-totalMoney">0</span></td></tr>
                        <tr class="hide" id="stopBuy-pageRow">
                            <td colspan="4" class="fb tfoot" style="text-align: center">
                                <a href="javascript:void(0)" class="btn-common" id="stopBuy-prevPage" i18n="kuaida.prevPage">上一页</a>
                                &nbsp;&nbsp;
                                <span id="stopBuy-currpage">0</span>&nbsp;/&nbsp;<span id="stopBuy-pages">0</span>
                                &nbsp;&nbsp;
                                <a href="javascript:void(0)" class="btn-common" id="stopBuy-nextPage" i18n="kuaida.nextPage">下一页</a>
                            </td>
                        </tr>
                        </tfoot>
                    </table>

                </div>
            </div>

            <div class="bd m5 module">
                <table class="t-1 tc table_bg">
                    <thead>
                    <tr class="title-bar"> <td colspan="8" class="tc">下注框</td> </tr>
                    <!--                    <tr class="mod-cz-bd nav-cz-sub active"><td colspan="8" class="tc">下注框</td></tr>-->
                    <tr class="bg3">
                        <td width="7%">彩种</td>
                        <td width="20%">方案</td>
                        <td width="20%">注单编号</td>
                        <td width="8%">号码</td>
                        <td width="14%">赔率</td>
                        <td width="10%">金额</td>
                        <td width="7%">状态</td>
                        <td class="align-checkbox-wrap print_area" width="14%">
                            <label class="align-checkbox">
                                <span>全选</span><input type="checkbox" id="selectAll" class="checkbox">
                            </label>
                            <input type="button" value="退码" class="btn-common fn-cancelbet" id="cancelbet">
                        </td>
                    </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                </table>
            </div>
        </td>
    </tr>
</table>



<!-- 保存方案}} -->

<script src="../js/jquery/jquery.min.js"></script>
<script src="../js/jquery.i18n.min.js"></script>
<script src="../js/layui/layui.all.js"></script>
<script src="../js/multi_lang_config.js"></script>
<script src="../js/token.js"></script>
<script src="../js/config.js"></script>
<script src="../js/kuaixuan-3d.js"></script>
<script src="../js/projects/validate.js"></script>

<script type="text/javascript">
    var $ = layui.$;
    var lmId = 7;
    var lsType = 1;
    var totalAmount = 0;
    var totalMoney  = 0;
    var allCodesArr=[];

    var rules = {
        "d2":{
            "d2":{
                bai:'',
                shi:'',
                ge:'',
                totals:0,
                codeList:[]
            },
            "c2d":{
                bai:'',
                totals:0,
                codeList:[]
            }
        }
    }

    var selectList = [];

    window.onload=function(){
        parent.window.frameLoad();
        //create3DCodes();
        getData();
        //initBuyList();
    }

    function clearList(){
        selectList = [];
        upSelectList();
    }

    //刷新选号列表
    function upSelectList(){
        if(selectList.length>0){
            var html = "";
            for(var i=0;i<selectList.length;i++){
                var item = selectList[i];
                var na = item.huizongName;
                var codes = item.value;
                var buyAmount = item.buyAmount;
                var li = '<li class="" codes="Z1|234,3,3">'+
                    '<span class="del" count="3" onclick="delSelect(\''+item.uuid+'\')">删除</span>'+
                    '<div class="code">'+
                    '<b>'+na+'</b><b class="em">'+codes+'</b>  ['+buyAmount+'注]</div>'+
                    '</li>'
                html+=li;
            }
            $("#codelist").html(html);
        }else{
            $("#codelist").html("");
        }
        sumTotalMoney();
    }


    //删除
    function delSelect(uuid) {
        if(selectList.length>0){
            var newList = [];
            for(var i=0;i<selectList.length;i++) {
                var item = selectList[i];
                if(item.uuid!=uuid){
                    newList.push(item);
                }
            }
            selectList = newList;
            upSelectList();
        }
    }

    //切换小玩法
    function changeLsType(domThis,lsTypeId) {
        lsType = lsTypeId;
        $(domThis).parent("label").siblings().find(":radio").attr("checked",false);
        $("#lm-plays-"+lmId+"-"+lsTypeId).show();
        $("#lm-plays-"+lmId+"-"+lsTypeId).siblings().hide();
    }

    //选择球
    function selectBall(domThis,ballNum,loc) {
        if(lsType==1) {//普通
            __2d(domThis,ballNum,loc,false);
        }
        if(lsType==2) {//胆拖
            __c2d(domThis,ballNum,loc,false);
        }
    }

    function __2d(domThis,ballNum,loc,isClear){
        var playId = "lm-plays-" + lmId + "-" + lsType;
        var locIdx = 0;
        if(loc=='bai'){
            locIdx = 0;
        }else if(loc=="shi"){
            locIdx = 1
        }else if(loc=='ge'){
            locIdx = 2;
        }
        if(isClear){
            $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
                $(this).removeClass("btn-boll-active")
            })
            if(locIdx==0)rules.d2.d2.bai="";
            if(locIdx==1)rules.d2.d2.shi="";
            if(locIdx==2)rules.d2.d2.ge="";
        }else{
            switch (ballNum) {
                case 10://全部
                case 11: //小
                case 12: //大
                case 44: //偶
                case 55: //奇
                    $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
                        $(this).removeClass("btn-boll-active")
                    })
                    $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
                        var num = $(this).attr("num");
                        if(ballNum==10) {
                            $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                        }else if(ballNum==11){
                            if(eval(num)<5){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }else if(ballNum==12){
                            if(eval(num)>4){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }else if(ballNum==44){
                            if(eval(num)%2==0){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }else if(ballNum==55){
                            if(eval(num)%2==1){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }
                    })
                    break;
                default:
                    $(domThis).is(".btn-boll-active") ? $(domThis).removeClass("btn-boll-active") : $(domThis).addClass("btn-boll-active");
                    break;
            }
        }

        if(locIdx==0)rules.d2.d2.bai="";
        if(locIdx==1)rules.d2.d2.shi="";
        if(locIdx==2)rules.d2.d2.ge="";
        $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
            var num = $(this).attr("num");
            if($(this).is(".btn-boll-active")){
                if(locIdx==0)rules.d2.d2.bai+=num;
                if(locIdx==1)rules.d2.d2.shi+=num;
                if(locIdx==2)rules.d2.d2.ge+=num;
            }
        });
        var bai = rules.d2.d2.bai;
        var shi = rules.d2.d2.shi;
        var ge = rules.d2.d2.ge;
        var clist = create2DCodes(bai,shi,ge);
        rules.d2.d2.totals=clist.length;
        $("#"+playId).find(".sel_info").eq(0).find("b").eq(0).html(rules.d2.d2.totals);
        sumTotalMoney();

    }


    function __c2d(domThis,ballNum,loc,isClear){
        var playId = "lm-plays-" + lmId + "-" + lsType;
        var locIdx = 0;
        if(isClear){
            $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
                $(this).removeClass("btn-boll-active")
            })
            if(locIdx==0)rules.d2.c2d.bai="";
        }else{
            switch (ballNum) {
                case 10://全部
                case 11: //小
                case 12: //大
                case 44: //偶
                case 55: //奇
                    $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
                        $(this).removeClass("btn-boll-active")
                    })
                    $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
                        var num = $(this).attr("num");
                        if(ballNum==10) {
                            $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                        }else if(ballNum==11){
                            if(eval(num)<5){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }else if(ballNum==12){
                            if(eval(num)>4){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }else if(ballNum==44){
                            if(eval(num)%2==0){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }else if(ballNum==55){
                            if(eval(num)%2==1){
                                $(this).is(".btn-boll-active") ? $(this).removeClass("btn-boll-active") : $(this).addClass("btn-boll-active");
                            }else{
                                $(this).removeClass("btn-boll-active")
                            }
                        }
                    })
                    break;
                default:
                    $(domThis).is(".btn-boll-active") ? $(domThis).removeClass("btn-boll-active") : $(domThis).addClass("btn-boll-active");
                    break;
            }
        }

        if(locIdx==0)rules.d2.c2d.bai="";
        $("#" + playId).find(".boll-item-col3").eq(locIdx).find(".boll-list>ul>li>em").each(function (i) {
            var num = $(this).attr("num");
            if($(this).is(".btn-boll-active")){
                if(locIdx==0)rules.d2.c2d.bai+=num;
            }
        });
        var bai = rules.d2.c2d.bai;
        var clist = createC2DCodes(bai);
        rules.d2.c2d.totals= clist.length;
        rules.d2.c2d.codeList = clist;
        $("#"+playId).find(".sel_info").eq(0).find("b").eq(0).html(rules.d2.c2d.totals);
        sumTotalMoney();

    }

    //清除
    function clearBall(domThis,loc){
        switch(lsType){
            case 1:
                __2d(domThis,null,loc,true);
                break;
            case 2:
                __c2d(domThis,null,'',true);
                break;
        }
    }

    //确认选号
    $("#confirm_sel_code").on("click","",function(e){
        switch(lsType){
            case 1:
                if(rules.d2.d2.totals>0){
                    var hzname = rules.d2.d2.totals == 1 ? '2D单式' : '2D复式'
                    var bai = rules.d2.d2.bai==""?'-':rules.d2.d2.bai;
                    var shi = rules.d2.d2.shi==""?'-':rules.d2.d2.shi;
                    var ge = rules.d2.d2.ge==""?'-':rules.d2.d2.ge;
                    selectList.push({
                        uuid:guid(),
                        huizongName: hzname,
                        value: bai + ","+shi+","+ge,
                        bai:rules.d2.d2.bai,
                        shi:rules.d2.d2.shi,
                        ge:rules.d2.d2.ge,
                        buyCodes:'',
                        buyAmount: rules.d2.d2.totals,
                        lmId: lmId,
                        lsTypeId: lsType,
                        buyMoney: ""
                    })
                }
                upSelectList();
                clearAllBall();

                break;
            case 2:
                if(rules.d2.c2d.totals>0) {
                    var hzname = '猜2D单式'
                    rules.d2.c2d.codeList.forEach((code,idx)=>{
                        selectList.push({
                            uuid:guid(),
                            huizongName: hzname,
                            value: code,
                            buyCodes:code,
                            buyAmount: 1,
                            lmId: lmId,
                            lsTypeId: lsType,
                            buyMoney: ""
                        })
                    })
                }
                upSelectList();
                clearAllBall();
                break;
        }
    })

    function sumTotalMoney(){
        var ta = 0;
        if(selectList.length>0){
            selectList.forEach((item,idx)=>{
                ta = accAdd(ta,item.buyAmount);
            })
        }
        totalAmount = ta;
        $("#count").html(totalAmount);
        var buyMoney = $("#buyMoney").val()
        if(validateMoney(buyMoney)){
            totalMoney = buyMoney*1*totalAmount;
        }else{
            totalMoney = 0;
        }
        $("#money").html(totalMoney); //总金额
    }

    $("#buyMoney").on("keyup","",function(e){
        if(!checkPhoneBrowser()){
            if(e.key=='.' || (e.keyCode>=48 && e.key<=57) || e.keyCode==8){
                if(this.value.indexOf(".")==0){
                    this.value = this.value.substr(1,this.value.length-1);
                }
            }else{
                this.value = this.value.substr(0,this.value.length-1);
            }
        }
        if(validateMoney(this.value)){
            if(this.value!=""){
                totalMoney = this.value*1*totalAmount;
            }else{
                totalMoney = 0;
            }
        }else{
            totalMoney = 0;
        }
        $("#money").html(totalMoney); //总金额

    });


    //确认下注
    $("#confirm_buy").on("click","",function(e){
        if(selectList.length<1){
            layer.alert("请选择号码");
            return;
        }
        var buyMoney = $("#buyMoney").val();
        if(buyMoney==""){
            layer.alert("请输入下注金额");
            return;
        }
        if(!validateMoney(buyMoney)){
            layer.alert("下注金额格式错误");
            return;
        }
        selectList.forEach((item,idx)=>{
            item.buyMoney = buyMoney;
        })
        var loading = layer.msg("正在提交...",{icon:16,time:-1,shade:0.3})

        $.ajax({
            url:HOST+"draw/pc/buy3d",
            type:'post',
            data:JSON.stringify(selectList),
            success:function (res) {
                layer.close(loading);
                if(res.code==0){
                    clearList();
                    stopBuyPager.currpage=1;
                    getStopBuyCodes(0);
                    initBuyList()
                    window.parent.getCredit();
                    window.parent.reloadPrintTable();
                }else{
                    layer.alert(res.msg)
                }
            }
        })
    })


    //清空所有选中的号码
    function clearAllBall(){
        var playId = "lm-plays-" + lmId + "-" + lsType;
        $("#"+playId).find(".btn-boll").removeClass("btn-boll-active");
        $("#"+playId).find(".k3-btn-boll").removeClass("k3-btn-boll-active");
        $("#"+playId).find(".sel_info").eq(0).find("b").eq(0).html(0)
        switch (lsType) {
            case 1:
                rules.d2.d2.bai = '';
                rules.d2.d2.shi = '';
                rules.d2.d2.ge = '';
                rules.d2.d2.totals = 0;
                break;
            case 2:
                rules.d2.c2d.bai = '';
                rules.d2.c2d.totals = 0;
                break;
        }
    }


    //生成3d号码
    function create3DCodes() {
        for(var i=0;i<10;i++){
            for(var j=0;j<10;j++){
                for(var k=0;k<10;k++){
                    var code = i+""+j+""+j;
                    allCodesArr.push({
                        code:code,
                        sum:(i+j+k)
                    });
                }
            }
        }
    }


    //生成2d号码
    function create2DCodes(bai,shi,ge) {
        var codeArr = [];
        var baiArr = bai.split("");
        var shiArr = shi.split("");
        var geArr = ge.split("");
        if(baiArr.length>0 && shiArr.length>0 && geArr.length>0){
            for(var i=0;i<baiArr.length;i++){
                for(var j=0;j<shiArr.length;j++){
                    for(var k=0;k<geArr.length;k++) {
                        var code1 = baiArr[i] + shiArr[j]+"X";
                        var code2 = baiArr[i] + "X"+geArr[k];
                        var code3 = "X" + shiArr[j]+geArr[k];
                        if(!codeArr.includes(code1)){
                            codeArr.push(code1);
                        }
                        if(!codeArr.includes(code2)){
                            codeArr.push(code2);
                        }
                        if(!codeArr.includes(code3)){
                            codeArr.push(code3);
                        }
                    }
                }
            }
        }else if(baiArr.length>0 && shiArr.length>0){
            for(var i=0;i<baiArr.length;i++){
                for(var j=0;j<shiArr.length;j++){
                    var code = baiArr[i]+shiArr[j]+"X";
                    codeArr.push(code);
                }
            }
        }else if(baiArr.length>0 && geArr.length>0){
            for(var i=0;i<baiArr.length;i++){
                for(var j=0;j<geArr.length;j++){
                    var code = baiArr[i]+"X"+geArr[j];
                    codeArr.push(code);
                }
            }
        }else if(shiArr.length>0 && geArr.length>0){
            for(var i=0;i<shiArr.length;i++){
                for(var j=0;j<geArr.length;j++){
                    var code = "X"+shiArr[i]+geArr[j];
                    codeArr.push(code);
                }
            }
        }
        //console.log("==============codeArr==",codeArr);
        return codeArr;


    }


    /**
     *
     * 猜2D号码，
     * 参考二字现
     * @param bai
     * @returns {[]}
     */
    function createC2DCodes(bai) {
        var codeArr = [];
        var baiArr = bai.split("");
        if(baiArr.length>0){
            for(var i=0;i<baiArr.length;i++){
                for(var j=0;j<baiArr.length;j++){
                    var arr = [baiArr[i],baiArr[j]];
                    arr.sort(function (n1,n2) {
                        return n1-n2;
                    })
                    var code = arr.join("");
                    if(!codeArr.includes(code)){
                        codeArr.push(code);
                    }
                }
            }
        }
        return codeArr;

    }

    //机选
    function robotChoose(count) {
        var codeList = [];
        var nums = [0,1,2,3,4,5,6,7,8,9];
        if(lsType==1){
            for(var i=0;i<count;i++){
                var rad = parseInt(Math.random()*10)%3;
                var n1 = parseInt(Math.random()*10);
                var n2 = parseInt(Math.random()*10);
                if(rad==0){
                    var co = [nums[n1],nums[n2],"-"];
                    codeList.push(co.join(","));
                }else if(rad==1){
                    var co = [nums[n1],"-",nums[n2]];
                    codeList.push(co.join(","));
                }else if(rad==2){
                    var co = ["-",nums[n1],nums[n2]];
                    codeList.push(co.join(","));
                }
            }
        }else if(lsType==2){
            for(var i=0;i<count;i++){
                var n1 = parseInt(Math.random()*10);
                var n2 = parseInt(Math.random()*10);
                codeList.push(nums[n1]+""+nums[n2]);
            }
        }

        if(codeList.length>0){
            codeList.forEach((code,idx)=>{
                var hzname = lsType==1?'2D单式':'猜2D单式'
                selectList.push({
                    uuid:guid(),
                    huizongName:hzname,
                    value:code,
                    buyCodes:code,
                    buyAmount:1,
                    lmId:lmId,
                    lsTypeId:lsType,
                    buyMoney:"",
                    rules:rules
                })
                upSelectList();
                clearAllBall();
            })
        }

    }

</script>

</body>
</html>
